COMPILER = g++
CFLAGS = -O3 -static
PRE_CFLAGS = ${CFLAGS} -c
TARGET = PbO-CCSAT

SRC_DIR = src

BASIS = basis
BASIS_TARGET = ${SRC_DIR}/${BASIS}.o
BASIS_CPP_FILE = ${SRC_DIR}/${BASIS}.cpp
BASIS_H_FILE = ${SRC_DIR}/${BASIS}.h
BASIS_SOURCE_FILES = ${BASIS_H_FILE} ${BASIS_CPP_FILE}

PARSE_ARGUMENTS = parse_arguments
PARSE_ARGUMENTS_TARGET = ${SRC_DIR}/${PARSE_ARGUMENTS}.o
PARSE_ARGUMENTS_CPP_FILE = ${SRC_DIR}/${PARSE_ARGUMENTS}.cpp
PARSE_ARGUMENTS_H_FILE = ${SRC_DIR}/${PARSE_ARGUMENTS}.h
PARSE_ARGUMENTS_SOURCE_FILES = ${PARSE_ARGUMENTS_H_FILE} ${PARSE_ARGUMENTS_CPP_FILE}

INFO = info
INFO_TARGET = ${SRC_DIR}/${INFO}.o
INFO_CPP_FILE = ${SRC_DIR}/${INFO}.cpp
INFO_H_FILE = ${SRC_DIR}/${INFO}.h
INFO_SOURCE_FILES = ${INFO_H_FILE} ${INFO_CPP_FILE}

MERSENNE = mersenne
MERSENNE_TARGET = ${SRC_DIR}/${MERSENNE}.o
MERSENNE_CC_FILE = ${SRC_DIR}/${MERSENNE}.cc
MERSENNE_H_FILE = ${SRC_DIR}/${MERSENNE}.h
MERSENNE_SOURCE_FILES = ${MERSENNE_H_FILE} ${MERSENNE_CC_FILE}

LOCAL_SEARCH = local_search
LOCAL_SEARCH_TARGET = ${SRC_DIR}/${LOCAL_SEARCH}.o
LOCAL_SEARCH_CPP_FILE = ${SRC_DIR}/${LOCAL_SEARCH}.cpp
LOCAL_SEARCH_H_FILE = ${SRC_DIR}/${LOCAL_SEARCH}.h
LOCAL_SEARCH_SOURCE_FILES = ${LOCAL_SEARCH_H_FILE} ${LOCAL_SEARCH_CPP_FILE}

HEURISTIC = heuristic
HEURISTIC_TARGET = ${SRC_DIR}/${HEURISTIC}.o
HEURISTIC_CPP_FILE = ${SRC_DIR}/${HEURISTIC}.cpp
HEURISTIC_H_FILE = ${SRC_DIR}/${HEURISTIC}.h
HEURISTIC_SOURCE_FILES = ${HEURISTIC_H_FILE} ${HEURISTIC_CPP_FILE}

SETTINGS = settings
SETTINGS_TARGET = ${SRC_DIR}/${SETTINGS}.o
SETTINGS_CPP_FILE = ${SRC_DIR}/${SETTINGS}.cpp
SETTINGS_H_FILE = ${SRC_DIR}/${SETTINGS}.h
SETTINGS_SOURCE_FILES = ${SETTINGS_H_FILE} ${SETTINGS_CPP_FILE}


TARGET_FILES =	 ${BASIS_TARGET} \
				${PARSE_ARGUMENTS_TARGET} \
				${INFO_TARGET} \
				${MERSENNE_TARGET} \
				${LOCAL_SEARCH_TARGET} \
				${HEURISTIC_TARGET} \
				${SETTINGS_TARGET}

MAIN_SOURCE_FILE = ${SRC_DIR}/main.cpp



CLEAN = clean
CLEANUP = cleanup



all: ${TARGET_FILES} ${TARGET} ${CLEAN}

${BASIS_TARGET}: ${BASIS_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${BASIS_CPP_FILE} -o ${BASIS_TARGET}
	
${PARSE_ARGUMENTS_TARGET}: ${PARSE_ARGUMENTS_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${PARSE_ARGUMENTS_CPP_FILE} -o ${PARSE_ARGUMENTS_TARGET}

${INFO_TARGET}: ${INFO_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${INFO_CPP_FILE} -o ${INFO_TARGET}

${MERSENNE_TARGET}: ${MERSENNE_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${MERSENNE_CC_FILE} -o ${MERSENNE_TARGET}

${LOCAL_SEARCH_TARGET}: ${LOCAL_SEARCH_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${LOCAL_SEARCH_CPP_FILE} -o ${LOCAL_SEARCH_TARGET}

${HEURISTIC_TARGET}: ${HEURISTIC_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${HEURISTIC_CPP_FILE} -o ${HEURISTIC_TARGET}

${SETTINGS_TARGET}: ${SETTINGS_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${SETTINGS_CPP_FILE} -o ${SETTINGS_TARGET}

${TARGET}: ${MAIN_SOURCE_FILE} ${TARGET_FILES}
	${COMPILER} ${CFLAGS} ${MAIN_SOURCE_FILE} ${TARGET_FILES} -o ${TARGET}

${CLEAN}:
	rm -f *~
	rm -f ${SRC_DIR}/*.o
	rm -f ${SRC_DIR}/*~

${CLEANUP}: ${CLEAN}
	rm -f ${TARGET}